<div class="container pb-5">
    <div class="row">
        <!-- Product Images -->
        <div class="col-md-6 mb-4">
            <div class="card bg-light">
                <img #mainImg [src]="'http://localhost:5067/' + product!.images[0]" class="card-img-top" style="height: 80vh;" alt="Product Image">
            </div>
        </div>

        <!-- Product Details -->
        <form #itemForm="ngForm" class="col-md-6" (ngSubmit)="cardServ.AddItem(product.id, product.name, itemForm.value['color'], qtySection.value, product.price)">
            <h1 class="h2 mb-3">{{ product.name }}</h1>
            <div class="mb-3">
                <span class="h4 me-2">${{ product.price }}</span>
                <span class="text-muted text-decoration-line-through">${{ product.price + (product.price*25/100) }}</span>
                <span class="badge bg-danger ms-2">25% OFF</span>
            </div>
            
            <p class="mb-4"><b>Category : </b>{{ product.category.name }}</p>
            <p class="mb-4">{{ product.description }}</p>

            <!-- Color Selection -->
            <div class="mb-4">
                <h6 class="mb-2">Color</h6>
                <div class="btn-group" role="group">
                    <ng-container *ngFor="let color of product.colors; let i = index;">
                        <input (change)="changeImg('http://localhost:5067/' + product.images[i], mainImg)" type="radio" 
                        class="btn-check" name="color" [id]="color" [value]="color" [ngModel]="product.colors[0]">
                        <label class="btn btn-outline-secondary" [for]="color">{{ color }}</label>
                    </ng-container>
                </div>
            </div>

            <!-- Quantity -->
            <div class="mb-4">
                <div class="d-flex align-items-center">
                    <label class="me-2">Quantity:</label>
                    <select #qtySection class="form-select w-auto">
                        <option selected>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                    </select>
                </div>
            </div>

            <!-- Action -->
            <div class="d-grid gap-2">
                <button type="submit" (click)="small_cercle_effect()" class="btn btn-primary">Add to Cart</button>
            </div>
        </form>
    </div>
    <div *ngIf="relatedItems!.length > 0">
        <hr class="border border-secondary border-2 opacity-50">
        <h4 class="text-center">Related Items</h4>
        <div class="d-flex justify-content-center">
            <div *ngFor="let item of relatedItems" class="card m-2" style="width: 20%;">
                <a [routerLink]="['/prods', item.id]" class="bg-light">
                    <img [src]="'http://localhost:5067/' + item.images[0]" class="card-img-top" alt="...">
                </a>
                
                <div class="card-body">
                    <h5 role="button" [routerLink]="['/prods', item.id]" class="card-title">{{ item.name }}</h5>
                    <p class="card-text">{{ item.price }}$</p>
                    <p><a [routerLink]="['/prods', item.id]" class="card-text">More Details</a></p>
                </div>
            </div>
        </div>
    </div>
</div>
